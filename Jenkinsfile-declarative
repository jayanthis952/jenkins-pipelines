pipeline {
    agent none
    stages {
        stage("BUILD") {
            agent { label 'master' }
            steps {
                sh 'sleep 10; echo "this is a build stage"'
            }
        }

        stage("TEST") {
            agent { label 'node1' }
            steps {
                sh 'sleep 10; echo "this is a test stage"'
            }
        }

        stage("DEPLOY") {
            agent { label 'node1' }
            steps {
                sh 'sleep 10; echo "this is a deploy stage"'
            }
        }
    }
}

